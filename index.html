<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="RADICAL OSG: This repository contains all of the notes, experiments, analysis and design gathered by the RADICAL team">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>radical-osg.gitHub.io</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/radical-cybertools/radical-osg.github.io">View on GitHub</a>

          <h1 id="project_title">RADICAL OSG</h1>
          <h2 id="project_tagline">This repository contains all of the notes, experiments, analysis, design, and experience which we (the RADICAL team) have gathered </h2>

        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h2>
<a id="welcome" class="anchor" href="#welcome" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Welcome to RADICAL OSG page</h2>

<p>We (RADICAL) are authorized to use two Submit Nodes managed by XSEDE and OSG Connect. Both  Submit Nodes are part of the OSG virtual organization (VO) and they both submit to the same OSG Entry Point. Apparently, the Entry Point gives access to ~120 sites [1] whatever ‘site’ might mean in this context, but the command connect status of the CI Connect  [25] distribution used by OSG connect indicates four resource pools: <strong>OSG Grid</strong>, <strong>Clemson Palmetto</strong>, <strong>Syracuse OrangeGrid</strong>, and <strong>UChicago UC3</strong>. These pools comprise diverse types of resources and middleware. Both XSEDE and OSG Connect Submit Nodes use GlideinWMS to submit pilots (i.e., Glidein Workers) to OSG Grid and maybe---but there are indications against it---Clemson Palmetto [15]. Probably but we are missing documentation, HTCondor is used to submit to Syracuse OrangeGrid and UChicago UC3 [15]</p>

<h2>
<a id="different-grids" class="anchor" href="#different-grids" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Different Grids</h2>

<h3>
<a id="osg-grid" class="anchor" href="#osg-grid" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>OSG Grid</h3>

<p>This resource pool is, at the moment, undocumented and difficult to inspect resource-wise. By sshing into <code>login.osgconnect.net</code> and using the command </code>connect status</code>, and <code>connect status -f | less</code>. We know that the OSG Grid pool of OSG Connect has a variable number of ‘resources’ (in this context I think it means single core glideins) in the order of ~11K but we do not see on what type of resources these glideins have been instantiated. This is to be expected with OSG but incompatible with running experiments to see whether AIMES can do better resource selection than OSG on the base of specific workload requirements. These experiments would require bundle to know the properties/capabilities of the resources where these glideins have been instantiated.</p>

<h3>
<a id="clemson-palmetto" class="anchor" href="#clemson-palmetto" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Clemson Palmetto</h3>

<p>This is Campus Grid with a total of 22328 cores from 9972 clusters of 20 different types with both shared and distributed memory [16]. OSG Connect “sees” 1360 resources ( probably single cores of compute nodes in this context) and as for OSG Grid, it is not documented/clear what type of cluster those resources belong to. [15] seems to imply that these resources are accessed from OSG Connect via glide-ins but <code>connect status -f | less</code> might indicate differently. While resources for OSG Grid are listed as, for example, <code>glidein_2120656_61</code> or <code>slot1_2@glidein_26</code> those on Palmetto are listed as, for example, <code>18084@node0020</code>. Is this suggesting a direct interaction with Palmetto, maybe via a HTCondor software stack installed at Palmetto’s resources?</p>

<h3>
<a id="syracuse-orange-grid" class="anchor" href="#syracuse-orange-grid" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Syracuse OrangeGrid</h3>

<p>This is a Campus Grid with a HTCondor software stack and a pool of workstations. They developed in house a HTCondor Virtual Machine Coordinator (CVMC) [19]. This VM is installed on different types of workstations/small clusters with diverse OSs (windows, linux) and hypervisors [24]. Condor schedules jobs on those VMs that run only when the workstations are idle. Accordingly, <code>connect status -f | less</code> indicates OrangeGrid resources as <code>3385@AS-ES-LAB-04-</code> or <code>1829@LIB-LEBIRD1-3</code>.</p>

<h3>
<a id="uchicago-uc3" class="anchor" href="#uchicago-uc3" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>UChicago UC3</h3>

<p>This is a Campus Grid [22, 23] composed of clusters and resource pools of diverse size and with diverse middleware. Bosco [21] is used to expose resources managed via PBS, SGE, and SLURM while Condor is used for other clusters/pools including something called “UC3 seeders” with, apparently, 544 job slots [23]. This is what UC3 is but, as usual, I did not manage to find documentation about what portion of UC3 is usable from OSG Connect and with what properties and capabilities.</p>

<p>Mark indicated [26] how to get the list of sites in the OSG VO via a ldap client (i.e. interrogating the GIP [8], the information system maintained by OSG):<p>

<code>ldapsearch -LLL -h is.grid.iu.edu -p 2170 -x -b 'o=grid' '(&(objectClass=GlueCE)(GlueCEAccessControlBaseRule=VO:osg))' GLIDEIN_ResourceName|grep -v dn:|cut -f2 -d=|cut -f1 -d,|sort|uniq</code

</p>

<h2>
<a id="osg-terminology" class="anchor" href="#osg-terminology" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>OSG-specific Terminology</h2>

<p><strong>Submit Node: </strong>A ‘machine’ where the user can log on via ssh. Equivalent to a HPC cluster head/front node. Also called: submit host/Point.</p>
<p><strong>Entry Point: </strong>Generic term referring to the interface between the submit node and the (condor) pool or resources.</p>
<p><strong>GlideinWMS: </strong>Set of services used to instantiate pilots (glide-ins) on Grid resources and condor pools in general.</p>
<p><strong>HTCondor CE: </strong>Computing Element (CE)</p>
<p><strong>HTConder SE: </strong>Storage Element (SE)</p>
<p><strong>Condor: </strong>A batch system + scheduler used to assign condor jobs to condor resources. Equivalent to PBS/SGE/SLURM etc.</p>
<p><strong>Worker Node (WN) Client: </strong>The service installed on every compute node/resource of a condor pool.</p>

<h2>
<a id="architecture" class="anchor" href="#architecture" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Architecture</h2>

<p>CI Connect + HTCondor + GlideinWMS enables multiple configurations. Here we describe the one of XSEDE OSG and OSG Connect. Both XSEDE OSG and OSG Connect are Submit Nodes for the OSG Virtual Organization (VO). The OSG Connect architecture is sparsely and superficially documented. Red boxes indicate the generic architecture of (a portion of) OSG Grid as I do not know how to collect information about the resources composing the OSG Grid pool used by OSG Connect.</p>

<img src="images/osg-architecture.png" alt="osg-architecture" style="width:640px;height:445px;"


<h3>
<a id="getting-info" class="anchor" href="#architecture" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Getting information about jobs and glideins</h3>

<p><code>
$ condor_q -pool osg-flock.grid.iu.edu -global -autoformat:,Vh \ </code></p>
<p style="margin-left: 5em;"><code>
globaljobid \ <br>
projectname \ <br>
remotehost \ <br>
QDate \ <br>
JobStartDate \ <br>
MATCH_EXP_JOB_GLIDEIN_Factory \ <br>
RequestCpus \ <br>
xsede_job \ <br>
RemoteSlotID
</code></p>

<p><code>"login01.osgconnect.net#9021661.0#1430170451" , "Swift" , undefined , 1430170431, undefined , undefined , 1 , undefined, undefined </code></p>
<br>
<p><code>$ condor_status -pool osg-flock.grid.iu.edu -autoformat:,Vh \ </code></p>
<p style="margin-left: 5em;"><code>
GlobalJobId \ <br>
glidein_site \ <br>
glidein_resourcename \ <br>
machine glidein_ses \ <br>
state \ <br>
activity \ <br>
EnteredCurrentState \ <br>
GLIDEIN_ToDie \ <br>
hasfiletransfer \ <br>
HasMPI \ <br>
DetectedCpus \ <br>
DetectedMemory \ <br>
Cpus \ <br>
Memory \ <br>
TotalCpus \ <br>
TotalSlotCpus \ <br>
TotalSlots \ <br>
TotalMemory \ <br>
SlotType \ <br>
SlotWeight \ <br>
GLIDEIN_Factory \ <br>
GLIDEIN_MASTER_NAME \ <br>
DaemonStartTime \ <br>
EnteredCurrentActivity \ <br>
SlotID </code></p>
<p><code>
undefined  , "ISI_VM" , "ISI_VM" , "04940910-7ada-4bfb-b9fa-3e7d6dc2c32a.novalocal", undefined , "Unclaimed", "Idle" , 1445041394 , undefined , true , true , 8 , 15950         , 7 , 15822 , 8.0 , 8 , 2 , 15950 , "Partitionable", 7 , undefined , undefined , 1445041115 , 1445041394 , 1 <br><br><br>
</code></p>

<h3>
<a id="authors-and-contributors" class="anchor" href="#authors-and-contributors" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Authors and Contributors</h3>

<p>You can @mention a GitHub username to generate a link to their profile. The resulting <code>&lt;a&gt;</code> element will link to the contributor’s GitHub Profile. For example: In 2007, Chris Wanstrath (<a href="https://github.com/defunkt" class="user-mention">@defunkt</a>), PJ Hyett (<a href="https://github.com/pjhyett" class="user-mention">@pjhyett</a>), and Tom Preston-Werner (<a href="https://github.com/mojombo" class="user-mention">@mojombo</a>) founded GitHub.</p>


<h3>
<a id="support-or-contact" class="anchor" href="#support-or-contact" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Support or Contact</h3>

<p>Having trouble with Pages? Check out our <a href="https://help.github.com/pages">documentation</a> or <a href="https://github.com/contact">contact support</a> and we’ll help you sort it out.</p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">radical-osg.gitHub.io maintained by <a href="https://github.com/radical-cybertools">radical-cybertools</a></p>
        <p>Published with <a href="https://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
